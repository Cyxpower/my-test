{"version":3,"file":"js/944.7032b892.js","mappings":"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","sources":["webpack://muban/./src/views/Mymsg.vue?4db1","webpack://muban/src/views/Mymsg.vue","webpack://muban/./src/views/Mymsg.vue?387b","webpack://muban/./src/views/Mymsg.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all\"},[_c('van-nav-bar',{attrs:{\"title\":\"个人资料\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('div',{staticClass:\"bg\"}),_c('div',{staticClass:\"msg-box\"},[_c('div',{staticClass:\"msg-item\"},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"头像\")]),_c('div',{staticClass:\"avatar\"},[_c('van-uploader',{attrs:{\"after-read\":_vm.updateAvatar}},[_c('img',{attrs:{\"src\":_vm.Mymsg.userImg,\"alt\":\"\"}})])],1)]),_c('div',{staticClass:\"van-hairline--top\"}),_c('div',{staticClass:\"msg-item\"},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"用户id\")]),_c('div',{staticClass:\"avatar\"},[_c('span',[_vm._v(_vm._s(_vm.Mymsg.userId))])])]),_c('div',{staticClass:\"van-hairline--top\"}),_c('div',{staticClass:\"msg-item\"},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"昵称\")]),_c('div',{staticClass:\"avatar\"},[_c('span',[_c('van-field',{on:{\"change\":_vm.updateNickname},model:{value:(_vm.Mymsg.nickName),callback:function ($$v) {_vm.$set(_vm.Mymsg, \"nickName\", $$v)},expression:\"Mymsg.nickName\"}})],1)])]),_c('div',{staticClass:\"van-hairline--top\"}),_c('div',{staticClass:\"msg-item\"},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"简介\")]),_c('div',{staticClass:\"avatar\"},[_c('span',[_c('van-field',{attrs:{\"autosize\":\"\"},on:{\"change\":_vm.updateDesc},model:{value:(_vm.Mymsg.desc),callback:function ($$v) {_vm.$set(_vm.Mymsg, \"desc\", $$v)},expression:\"Mymsg.desc\"}})],1)])]),_c('van-uploader',{staticClass:\"updateBg\",attrs:{\"max-count\":1,\"deletable\":false,\"after-read\":_vm.updateBg}},[_c('van-button',{attrs:{\"icon\":\"plus\",\"type\":\"default\"}},[_vm._v(\"修改背景\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"all\">\r\n    <van-nav-bar title=\"个人资料\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    <div class=\"bg\"></div>\r\n    <div class=\"msg-box\">\r\n      <div class=\"msg-item\">\r\n        <div class=\"item-text\">头像</div>\r\n        <div class=\"avatar\">\r\n          <van-uploader :after-read=\"updateAvatar\">\r\n            <img :src=\"Mymsg.userImg\" alt />\r\n          </van-uploader>\r\n        </div>\r\n      </div>\r\n      <div class=\"van-hairline--top\"></div>\r\n      <div class=\"msg-item\">\r\n        <div class=\"item-text\">用户id</div>\r\n        <div class=\"avatar\">\r\n          <span>{{ Mymsg.userId }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"van-hairline--top\"></div>\r\n      <div class=\"msg-item\">\r\n        <div class=\"item-text\">昵称</div>\r\n        <div class=\"avatar\">\r\n          <span>\r\n            <van-field v-model=\"Mymsg.nickName\" @change=\"updateNickname\" />\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"van-hairline--top\"></div>\r\n      <div class=\"msg-item\">\r\n        <div class=\"item-text\">简介</div>\r\n        <div class=\"avatar\">\r\n          <span>\r\n            <van-field v-model=\"Mymsg.desc\" autosize @change=\"updateDesc\" />\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <van-uploader class=\"updateBg\" :max-count=\"1\" :deletable=\"false\" :after-read=\"updateBg\">\r\n        <van-button icon=\"plus\" type=\"default\">修改背景</van-button>\r\n      </van-uploader>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/mymsg.less\";\r\nimport { Toast } from \"vant\";\r\nexport default {\r\n  created() {\r\n    this.getMymsg();\r\n  },\r\n  data() {\r\n    return {\r\n      Mymsg: {}\r\n    };\r\n  },\r\n  methods: {\r\n    updateBg(e) {\r\n      if (e.file.type == 'image/webp') {\r\n        this.$toast('此格式的图片暂时不可用')\r\n        return\r\n      }\r\n      let type = e.file.type.split(\"/\")[1];\r\n      let content = e.content.replace(\"data:image/jpeg;base64,\", \"\");\r\n      this.axios({\r\n        method: \"post\",\r\n        url: \"/updateUserBg\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\"),\r\n          imgType: type,\r\n          serverBase64Img: content\r\n        }\r\n      }).then(res => {\r\n        Toast(\"更换背景成功\");\r\n        console.log(res);\r\n      });\r\n    },\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    getMymsg() {\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0\r\n      });\r\n      this.axios({\r\n        method: \"get\",\r\n        url: \"/findAccountInfo\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\")\r\n        }\r\n      }).then(res => {\r\n        Toast.clear();\r\n        console.log(\"res\", res);\r\n        this.Mymsg = res.data.result[0];\r\n        if (this.Mymsg.desc.length == 0) {\r\n          this.Mymsg.desc = \"这家伙很懒，什么也没有留下！\";\r\n        }\r\n      });\r\n    },\r\n    updateAvatar(e) {\r\n      if (e.file.type == 'image/webp') {\r\n        this.$toast('此格式的头像不可用')\r\n        return\r\n      }\r\n      let type = e.file.type.split(\"/\")[1];\r\n      let content = e.content.replace(\"data:image/jpeg;base64,\", \"\");\r\n      this.axios({\r\n        method: \"post\",\r\n        url: \"/updateAvatar\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\"),\r\n          imgType: type,\r\n          serverBase64Img: content\r\n        }\r\n      }).then(res => {\r\n        Toast(\"更换头像成功\");\r\n        this.getMymsg();\r\n        console.log(res);\r\n      });\r\n    },\r\n    updateNickname() {\r\n      if (this.Mymsg.nickName.length == 0) {\r\n        Toast(\"昵称不可以为空！\");\r\n        return;\r\n      }\r\n      this.axios({\r\n        method: \"post\",\r\n        url: \"/updateNickName\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\"),\r\n          nickName: this.Mymsg.nickName\r\n        }\r\n      }).then(res => {\r\n        Toast(\"修改昵称成功！\");\r\n        console.log(\"修改后的昵称\", res);\r\n      });\r\n    },\r\n    updateDesc() {\r\n      if (this.Mymsg.desc.length == 0) {\r\n        this.Mymsg.desc = \"这家伙很懒，什么也没有留下！\";\r\n      }\r\n      this.axios({\r\n        method: \"post\",\r\n        url: \"/updateDesc\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\"),\r\n          desc: this.Mymsg.desc\r\n        }\r\n      }).then(res => {\r\n        Toast(\"修改简介成功！\");\r\n        console.log(\"修改简介成功\", res);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Mymsg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Mymsg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mymsg.vue?vue&type=template&id=2037cca3&\"\nimport script from \"./Mymsg.vue?vue&type=script&lang=js&\"\nexport * from \"./Mymsg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","_v","updateAvatar","Mymsg","userImg","_s","userId","updateNickname","model","value","callback","$$v","$set","expression","updateDesc","updateBg","staticRenderFns","created","data","methods","method","url","appkey","tokenString","imgType","serverBase64Img","then","res","console","getMymsg","message","forbidClick","duration","params","nickName","desc","log","$router","go","loading","result","length","component"],"sourceRoot":""}