"use strict";(self["webpackChunkmuban"]=self["webpackChunkmuban"]||[]).push([[766],{6766:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("div",{staticClass:"nav-top"},[e._m(0),o("div",{staticClass:"nav-right",on:{click:e.toHome}},[e._v("先逛一逛")])]),e._m(1),o("div",{staticClass:"input"},[o("van-cell-group",{attrs:{inset:""}},[o("van-field",{attrs:{clearable:"",readonly:"readonly",name:"手机号",label:"手机号",placeholder:"请输入手机号"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},nativeOn:{touchstart:function(t){t.stopPropagation(),e.showkeyboard=!0}},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}}),o("van-number-keyboard",{attrs:{show:e.showkeyboard},on:{blur:function(t){e.showkeyboard=!1}},model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}}),o("van-field",{attrs:{clearable:"",type:e.showPassword?"password":"text",name:"密码",label:"密码",placeholder:"请输入密码","right-icon":e.showPassword?"closed-eye":"eye-o"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)},"click-right-icon":e.changeEye},model:{value:e.userInfo.password,callback:function(t){e.$set(e.userInfo,"password",t)},expression:"userInfo.password"}})],1),o("div",{staticClass:"forget-span",on:{click:e.showForgetPassword}},[o("span",[e._v("忘记密码")])]),o("div",{staticStyle:{margin:"17px","margin-top":"16px"}},[o("van-button",{attrs:{round:"",block:"",type:"primary","native-type":"submit"},on:{click:e.login}},[e._v("登录")])],1),o("div",{staticStyle:{margin:"17px","margin-top":"16px"}},[o("van-button",{staticStyle:{background:"white",color:"black",border:"1px solid gray"},attrs:{round:"",block:"",type:"primary","native-type":"submit"},on:{click:e.showPopup}},[e._v("注册")])],1)],1),o("van-popup",{style:{height:"50%"},attrs:{"close-on-click-overlay":!1,closeable:"",position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[o("div",{staticClass:"register-box"},[o("h1",[e._v("注册")]),o("div",{staticClass:"register"},[o("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"请输入手机号"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register.apply(null,arguments)}},model:{value:e.registerInfo.phone,callback:function(t){e.$set(e.registerInfo,"phone",t)},expression:"registerInfo.phone"}}),o("van-field",{attrs:{type:e.showPassword?"password":"text",name:"密码",label:"密码",placeholder:"由数字字母下划线组成(6-16字符)","right-icon":e.showPassword?"closed-eye":"eye-o"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register.apply(null,arguments)},"click-right-icon":function(t){return e.changeEye()}},model:{value:e.registerInfo.password,callback:function(t){e.$set(e.registerInfo,"password",t)},expression:"registerInfo.password"}}),o("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"请输入昵称"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register.apply(null,arguments)}},model:{value:e.registerInfo.nickName,callback:function(t){e.$set(e.registerInfo,"nickName",t)},expression:"registerInfo.nickName"}}),o("div",{staticStyle:{margin:"16px","margin-top":"25px"}},[o("van-button",{staticStyle:{color:"white",border:"1px solid gray"},attrs:{round:"",block:"",type:"primary","native-type":"submit"},on:{click:e.register}},[e._v("注册")])],1)],1)])]),o("van-popup",{style:{height:"50%"},attrs:{"close-on-click-overlay":!1,closeable:"",position:"bottom"},model:{value:e.showForget,callback:function(t){e.showForget=t},expression:"showForget"}},[o("div",{staticClass:"forget-box"},[o("h1",[e._v("忘记密码")]),o("div",{staticClass:"forget"},[o("div",{staticClass:"forget-get"},[o("van-field",{attrs:{name:"邮箱",label:"邮箱",placeholder:"请输入密保邮箱"},model:{value:e.forgetInfo.email,callback:function(t){e.$set(e.forgetInfo,"email",t)},expression:"forgetInfo.email"}}),o("div",{staticClass:"forget-button",staticStyle:{margin:"0px"}},[o("van-button",{directives:[{name:"show",rawName:"v-show",value:1==e.timeTrue,expression:"timeTrue == true"}],staticStyle:{color:"white",border:"1px solid gray",background:"#202023"},attrs:{round:"",block:"",type:"primary",text:"获取验证码","native-type":"submit"},on:{click:e.getEmailValidCode}}),o("van-button",{directives:[{name:"show",rawName:"v-show",value:0==e.timeTrue,expression:"timeTrue == false"}],staticStyle:{color:"white",border:"1px solid gray",background:"grey"},attrs:{type:"primary",round:"",block:"",disabled:!0}},[e._v(e._s(e.time)+"s后重新获取")])],1)],1),o("van-field",{attrs:{name:"验证码",label:"验证码",placeholder:"请输入验证码"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkValidCode.apply(null,arguments)}},model:{value:e.forgetInfo.ValidCode,callback:function(t){e.$set(e.forgetInfo,"ValidCode",t)},expression:"forgetInfo.ValidCode"}}),o("div",{staticStyle:{margin:"16px","margin-top":"25px"}},[o("van-button",{staticStyle:{color:"white",border:"1px solid gray"},attrs:{round:"",block:"",type:"primary","native-type":"submit"},on:{click:e.checkValidCode}},[e._v("下一步")])],1)],1)])])],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"nav-left"},[s("img",{attrs:{src:o(5149),alt:""}}),s("span",[e._v("   MY Computer")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"logo"},[s("img",{attrs:{src:o(971),alt:""}})])}],r=o(188),n={created(){localStorage.getItem("_lk")&&this.$router.push({name:"Home"})},data(){return{userInfo:{phone:"",password:""},registerInfo:{phone:"",password:"",nickName:""},forgetInfo:{email:"",ValidCode:""},showPassword:!0,show:!1,showForget:!1,timeTrue:!0,time:0,showkeyboard:!1}},methods:{getEmailValidCode(){let e={email:{value:this.forgetInfo.email,errorMsg:"请输入正确的邮箱格式",reg:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/}},t=r.$.valid(e);if(t){this.timeTrue=!1,this.time=60;var o=setInterval((()=>{this.time--,this.time<=0&&(clearInterval(o),this.timeTrue=!0)}),1e3);this.axios({method:"post",url:"/emailValidCode",data:{appkey:this.appkey,email:this.forgetInfo.email}}).then((e=>{this.$toast(e.data.msg)}))}},checkValidCode(){this.axios({method:"post",url:"/checkValidCode",data:{appkey:this.appkey,validCode:this.forgetInfo.ValidCode}}).then((e=>{"K001"==e.data.code?(this.showForget=!1,this.$toast(e.data.msg),this.$router.push({name:"Updatepwd"})):this.$toast(e.data.msg)}))},showForgetPassword(){this.showForget=!0},showPopup(){this.show=!0},register(){let e={phone:{value:this.registerInfo.phone,errorMsg:"手机号格式不正确",reg:/^1[3-9]\d{9}$/},password:{value:this.registerInfo.password,errorMsg:"密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},nickName:{value:this.registerInfo.nickName,errorMsg:"昵称由字母数字下划线汉字组合(1-10字符)",reg:/^[\w\u4e00-\u9fa5]{1,10}$/}};console.log(e);let t=r.$.valid(e);t&&this.axios({method:"post",url:"/register",data:{appkey:this.appkey,nickName:this.registerInfo.nickName,password:this.registerInfo.password,phone:this.registerInfo.phone}}).then((e=>{console.log("注册的信息",e),100==e.data.code?(this.$toast(e.data.msg),this.show=!1,this.userInfo.phone=this.registerInfo.phone,this.userInfo.password=this.registerInfo.password):this.$toast(e.data.msg)})).catch((e=>{console.log(err)}))},changeEye(){this.showPassword=!this.showPassword},toHome(){this.$router.push({name:"Home"})},login(){let e={phone:{value:this.userInfo.phone,errorMsg:"请输入正确的11位手机号码",reg:/^1[3-9]\d{9}$/},password:{value:this.userInfo.password,errorMsg:"请输入正确的密码格式，由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},t=r.$.valid(e);t&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"post",url:"/login",data:{appkey:this.appkey,password:this.userInfo.password,phone:this.userInfo.phone}}).then((e=>{this.$toast.clear(),200==e.data.code?(this.$toast("登录成功"),localStorage.setItem("_lk",e.data.token),setTimeout((()=>{this.$router.push("/home")}),1e3)):this.$toast(e.data.msg)})).catch((e=>{console.log("登录失败",e)})),console.log(e))}}},i=n,l=o(3736),c=(0,l.Z)(i,s,a,!1,null,null,null),d=c.exports},188:function(e,t,o){o.d(t,{$:function(){return n}});o(4837);var s=o(9146),a=o(144);a.Z.use(s.Z);class r{constructor(){}valid(e){for(let t in e)if(!e[t].reg.test(e[t].value))return(0,s.Z)(e[t].errorMsg),!1;return!0}}const n=new r},971:function(e,t,o){e.exports=o.p+"img/logo.6e882096.png"},5149:function(e,t,o){e.exports=o.p+"img/smalllogo.b13ed671.png"}}]);
//# sourceMappingURL=766.3149f88a.js.map