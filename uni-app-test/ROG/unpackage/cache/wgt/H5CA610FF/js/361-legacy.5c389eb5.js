"use strict";(self["webpackChunkmuban"]=self["webpackChunkmuban"]||[]).push([[361],{5361:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"all"},[s("div",{staticClass:"top-all"},[s("div",{staticClass:"nav-left"},[s("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),s("div",{staticClass:"search"},[s("form",{attrs:{action:"/"}},[s("van-search",{ref:"search",attrs:{placeholder:"搜点你喜欢的比如：显示器...",shape:"round"},on:{search:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])]),s("div",{staticClass:"bg"}),s("div",{staticClass:"circle"},[t.open?s("van-circle",{attrs:{rate:t.rate,speed:100,size:"100px",color:t.gradientColor,text:"正在加载中..."},model:{value:t.currentRate,callback:function(e){t.currentRate=e},expression:"currentRate"}}):t._e()],1),t.open?t._e():s("div",{staticClass:"result-box"},t._l(t.resultArr,(function(e){return s("div",{key:e.pid,staticClass:"result-item",on:{click:function(s){return t.toDetail(e.pid)}}},[s("img",{attrs:{src:e.smallImg,alt:""}}),s("div",{staticClass:"result-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"result-enname"},[s("span",[t._v(t._s(e.enname))])]),s("div",{staticClass:"result-price"},[s("span",[t._v("¥"+t._s(e.price))])])])})),0),t.open?t._e():s("div",{staticClass:"bottom_message"},[s("p",[t._v("我们还在不停的进货当中,请耐心等候...")]),s("p",[t._v("可能会搜出一些奇奇怪怪的东西，请谅解...")])])])},r=[],l={computed:{text(){return this.currentRate.toFixed(0)+"%"}},mounted(){this.$nextTick((()=>{let t=this.$refs.search.querySelector('[type="search"]');t.focus()}))},created(){this.value=localStorage.getItem("his"),this.value&&this.onSearch(this.value)},data(){return{open:!1,resultArr:[],value:"",currentRate:0,rate:null,gradientColor:{"0%":"#3fecff","100%":"#6149f6"}}},methods:{onClickLeft(){this.$router.go(-1)},onSearch(t){var e="^[ ]+$",s=new RegExp(e),a=t.indexOf(" ");s.test(t)||0==t.length||-1!=a?this.$toast("请输入正确的商品关键字"):(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/search",params:{appkey:this.appkey,name:t}}).then((t=>{localStorage.setItem("his",this.value),this.$toast.clear(),console.log("搜索到的商品",t),this.rate=100,this.open=!0,setTimeout((()=>{this.open=!1,this.currentRate=0,this.resultArr=t.data.result}),1e3),0==t.data.result.length&&(this.open=!1,this.$toast("没有搜索到符合条件的商品"),this.resultArr=[])})).catch((t=>{console.log(t)})))},toDetail(t){console.log(t),this.$router.push({name:"Detail",query:{pid:t}})}}},i=l,n=s(3736),o=(0,n.Z)(i,a,r,!1,null,null,null),c=o.exports}}]);
//# sourceMappingURL=361-legacy.5c389eb5.js.map