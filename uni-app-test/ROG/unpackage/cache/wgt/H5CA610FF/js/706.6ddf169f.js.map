{"version":3,"file":"js/706.6ddf169f.js","mappings":"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","sources":["webpack://muban/./src/views/Safe.vue?f9cb","webpack://muban/src/views/Safe.vue","webpack://muban/./src/views/Safe.vue?e81a","webpack://muban/./src/views/Safe.vue","webpack://muban/./src/assets/validForm.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"safe\"},[_c('van-nav-bar',{attrs:{\"title\":\"安全中心\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('div',{staticClass:\"bg\"}),_c('div',{staticClass:\"safe-box\"},[_c('div',{staticClass:\"safe-item\",on:{\"click\":_vm.showPopup}},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"修改密码\")]),_c('div',{staticClass:\"item-icon\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('van-popup',{style:({height:'50%'}),attrs:{\"close-on-click-overlay\":false,\"closeable\":\"\",\"position\":\"bottom\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"updatePwd-box\"},[_c('h1',[_vm._v(\"修改密码\")]),_c('div',{staticClass:\"updataPwd\"},[_c('van-field',{attrs:{\"type\":_vm.showoldPassword?'password':'text',\"name\":\"旧密码\",\"label\":\"旧密码\",\"placeholder\":\"旧密码（首字符必须为字母）\",\"right-icon\":_vm.showoldPassword?'closed-eye':'eye-o'},on:{\"click-right-icon\":function($event){return _vm.changeoldpwdEye()},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.updatePassword.apply(null, arguments)}},model:{value:(_vm.userInfo.oldpwd),callback:function ($$v) {_vm.$set(_vm.userInfo, \"oldpwd\", $$v)},expression:\"userInfo.oldpwd\"}}),_c('van-field',{attrs:{\"type\":_vm.shownewPassword?'password':'text',\"name\":\"新密码\",\"label\":\"新密码\",\"placeholder\":\"新密码（首字符必须为字母）\",\"right-icon\":_vm.shownewPassword?'closed-eye':'eye-o'},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.updatePassword.apply(null, arguments)},\"click-right-icon\":function($event){return _vm.changenewpwdEye()}},model:{value:(_vm.userInfo.newpwd),callback:function ($$v) {_vm.$set(_vm.userInfo, \"newpwd\", $$v)},expression:\"userInfo.newpwd\"}}),_c('div',{staticStyle:{\"margin\":\"16px\",\"margin-top\":\"25px\"}},[_c('van-button',{staticStyle:{\"color\":\"white\",\"border\":\"1px solid gray\"},attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"primary\",\"native-type\":\"submit\"},on:{\"click\":_vm.updatePassword}},[_vm._v(\"修改密码\")])],1)],1)])]),_c('div',{staticClass:\"van-hairline--top\"}),_c('div',{staticClass:\"safe-item\",on:{\"click\":_vm.destroyAccount}},[_c('div',{staticClass:\"item-text\"},[_vm._v(\"注销账号\")]),_c('div',{staticClass:\"item-icon\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])],1),_c('div',{staticClass:\"logout\",staticStyle:{\"margin\":\"16px\",\"margin-top\":\"200px\"}},[_c('van-button',{staticStyle:{\"color\":\"white\",\"border\":\"1px solid gray\"},attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"primary\",\"native-type\":\"submit\"},on:{\"click\":_vm.logout}},[_vm._v(\"退出登录\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"safe\">\r\n    <van-nav-bar title=\"安全中心\" left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n    <div class=\"bg\"></div>\r\n    <div class=\"safe-box\">\r\n      <div class=\"safe-item\" @click=\"showPopup\">\r\n        <div class=\"item-text\">修改密码</div>\r\n        <div class=\"item-icon\">\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </div>\r\n      <van-popup\r\n        :close-on-click-overlay=\"false\"\r\n        v-model=\"show\"\r\n        closeable\r\n        position=\"bottom\"\r\n        :style=\"{height:'50%'}\"\r\n      >\r\n        <div class=\"updatePwd-box\">\r\n          <h1>修改密码</h1>\r\n          <div class=\"updataPwd\">\r\n            <van-field\r\n              v-model=\"userInfo.oldpwd\"\r\n              :type=\"showoldPassword?'password':'text'\"\r\n              name=\"旧密码\"\r\n              label=\"旧密码\"\r\n              placeholder=\"旧密码（首字符必须为字母）\"\r\n              :right-icon=\"showoldPassword?'closed-eye':'eye-o'\"\r\n              @click-right-icon=\"changeoldpwdEye()\"\r\n              @keyup.enter=\"updatePassword\"\r\n            />\r\n            <van-field\r\n              v-model=\"userInfo.newpwd\"\r\n              :type=\"shownewPassword?'password':'text'\"\r\n              name=\"新密码\"\r\n              label=\"新密码\"\r\n              placeholder=\"新密码（首字符必须为字母）\"\r\n              @keyup.enter=\"updatePassword\"\r\n              :right-icon=\"shownewPassword?'closed-eye':'eye-o'\"\r\n              @click-right-icon=\"changenewpwdEye()\"\r\n            />\r\n\r\n            <div style=\"margin: 16px;margin-top:25px;\">\r\n              <van-button\r\n                style=\"color:white;border: 1px solid gray;\"\r\n                round\r\n                block\r\n                type=\"primary\"\r\n                native-type=\"submit\"\r\n                @click=\"updatePassword\"\r\n              >修改密码</van-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-popup>\r\n      <div class=\"van-hairline--top\"></div>\r\n      <div class=\"safe-item\" @click=\"destroyAccount\">\r\n        <div class=\"item-text\">注销账号</div>\r\n        <div class=\"item-icon\">\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"logout\" style=\"margin: 16px;margin-top:200px;\">\r\n      <van-button\r\n        style=\"color:white;border: 1px solid gray;\"\r\n        round\r\n        block\r\n        type=\"primary\"\r\n        native-type=\"submit\"\r\n        @click=\"logout\"\r\n      >退出登录</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/safe.less\";\r\nimport { validForm } from \"../assets/validForm.js\";\r\nimport { Toast } from \"vant\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: {\r\n        oldpwd: \"\",\r\n        newpwd: \"\"\r\n      },\r\n      showoldPassword: true,\r\n      shownewPassword: true,\r\n      show: false\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    showPopup() {\r\n      this.show = true;\r\n    },\r\n    changeoldpwdEye() {\r\n      this.showoldPassword = !this.showoldPassword;\r\n    },\r\n    changenewpwdEye() {\r\n      this.shownewPassword = !this.shownewPassword;\r\n    },\r\n    updatePassword() {\r\n      let o = {\r\n        oldpwd: {\r\n          value: this.userInfo.oldpwd,\r\n          errorMsg: \"旧密码由数字字母下划线组合(6-16字符)\",\r\n          reg: /^[A-Za-z]\\w{5,15}$/\r\n        },\r\n        newpwd: {\r\n          value: this.userInfo.newpwd,\r\n          errorMsg: \"新密码由数字字母下划线组合(6-16字符)\",\r\n          reg: /^[A-Za-z]\\w{5,15}$/\r\n        }\r\n      };\r\n\r\n      let isPass = validForm.valid(o);\r\n      //   判断是否执行后面的代码\r\n      if (!isPass) {\r\n        // 终止后面的代码执行\r\n        return;\r\n      }\r\n      this.axios({\r\n        method: \"post\",\r\n        url: \"/updatePassword\",\r\n        data: {\r\n          appkey: this.appkey,\r\n          tokenString: localStorage.getItem(\"_lk\"),\r\n          password: this.userInfo.newpwd,\r\n          oldPassword: this.userInfo.oldpwd\r\n        }\r\n      }).then(res => {\r\n        if (res.data.code == \"E001\") {\r\n          Toast(res.data.msg);\r\n          console.log(\"修改密码成功\", res);\r\n          setTimeout(() => {\r\n            localStorage.removeItem(\"_lk\");\r\n            this.$router.push({ name: \"Login\" });\r\n          }, 1000);\r\n        } else {\r\n          Toast(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    destroyAccount() {\r\n      this.$dialog\r\n        .confirm({\r\n          title: \"注销账号\",\r\n          message: \"是否确定注销账号，一旦注销无法恢复！\"\r\n        })\r\n        .then(() => {\r\n          this.axios({\r\n            method: \"post\",\r\n            url: \"/destroyAccount\",\r\n            data: {\r\n              appkey: this.appkey,\r\n              tokenString: localStorage.getItem(\"_lk\")\r\n            }\r\n          }).then(res => {\r\n            this.$toast(\"注销账号成功！\");\r\n            console.log(\"注销账号成功\", res);\r\n            setTimeout(() => {\r\n              localStorage.removeItem(\"_lk\");\r\n              this.$router.push({ name: \"Login\" });\r\n            }, 1000);\r\n          });\r\n        })\r\n        .catch(() => {\r\n          return;\r\n        });\r\n    },\r\n    logout() {\r\n      this.$dialog\r\n        .confirm({\r\n          message: \"确定退出登录吗？\"\r\n        })\r\n        .then(() => {\r\n          this.axios({\r\n            method: \"post\",\r\n            url: \"/logout\",\r\n            params: {\r\n              appkey: this.appkey,\r\n              tokenString: localStorage.getItem(\"_lk\")\r\n            }\r\n          })\r\n            .then(res => {\r\n              console.log(\"退出登录成功\", res);\r\n              Toast(\"退出登录成功\");\r\n              this.$router.push({ name: \"Login\" });\r\n              localStorage.removeItem(\"_lk\");\r\n            })\r\n            .catch(err => {\r\n              console.log(err);\r\n            });\r\n        })\r\n        .catch(() => {\r\n          return;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Safe.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Safe.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Safe.vue?vue&type=template&id=6fa94ba7&\"\nimport script from \"./Safe.vue?vue&type=script&lang=js&\"\nexport * from \"./Safe.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\n\r\n//导入提示组件\r\nimport { Toast } from 'vant'\r\n\r\n//注册提示组件\r\nVue.use(Toast)\r\n\r\n//表单验证模块\r\nclass ValidForm {\r\n\r\n  constructor() {}\r\n\r\n  //验证表单方法\r\n  valid(o) {\r\n    //o: 表单验证数据， object\r\n    // \r\n    // \r\n\r\n    for (let key in o) {\r\n      if (!o[key].reg.test(o[key].value)) {\r\n        \r\n\r\n        //提示错误信息\r\n        Toast(o[key].errorMsg);\r\n        //表单验证不通过\r\n        return false;\r\n      }\r\n    }\r\n\r\n    //表单验证通过\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\n//导出表单验证模块实例\r\nexport const validForm = new ValidForm();"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","showPopup","_v","style","height","model","value","callback","$$v","show","expression","showoldPassword","$event","changeoldpwdEye","type","indexOf","_k","keyCode","key","updatePassword","apply","arguments","userInfo","$set","shownewPassword","changenewpwdEye","staticStyle","destroyAccount","logout","staticRenderFns","oldpwd","newpwd","methods","errorMsg","reg","method","url","appkey","tokenString","password","data","then","res","console","setTimeout","localStorage","name","confirm","title","message","catch","params","err","log","removeItem","push","$dialog","$toast","component","Vue","ValidForm","constructor","valid","o","test","validForm"],"sourceRoot":""}