{"version":3,"file":"js/361.5c389eb5.js","mappings":"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","sources":["webpack://muban/./src/views/Search.vue?97f7","webpack://muban/src/views/Search.vue","webpack://muban/./src/views/Search.vue?0ada","webpack://muban/./src/views/Search.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all\"},[_c('div',{staticClass:\"top-all\"},[_c('div',{staticClass:\"nav-left\"},[_c('van-nav-bar',{attrs:{\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1),_c('div',{staticClass:\"search\"},[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{ref:\"search\",attrs:{\"placeholder\":\"搜点你喜欢的比如：显示器...\",\"shape\":\"round\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)])]),_c('div',{staticClass:\"bg\"}),_c('div',{staticClass:\"circle\"},[(_vm.open)?_c('van-circle',{attrs:{\"rate\":_vm.rate,\"speed\":100,\"size\":\"100px\",\"color\":_vm.gradientColor,\"text\":\"正在加载中...\"},model:{value:(_vm.currentRate),callback:function ($$v) {_vm.currentRate=$$v},expression:\"currentRate\"}}):_vm._e()],1),(!_vm.open)?_c('div',{staticClass:\"result-box\"},_vm._l((_vm.resultArr),function(item){return _c('div',{key:item.pid,staticClass:\"result-item\",on:{\"click\":function($event){return _vm.toDetail(item.pid)}}},[_c('img',{attrs:{\"src\":item.smallImg,\"alt\":\"\"}}),_c('div',{staticClass:\"result-name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"result-enname\"},[_c('span',[_vm._v(_vm._s(item.enname))])]),_c('div',{staticClass:\"result-price\"},[_c('span',[_vm._v(\"¥\"+_vm._s(item.price))])])])}),0):_vm._e(),(!_vm.open)?_c('div',{staticClass:\"bottom_message\"},[_c('p',[_vm._v(\"我们还在不停的进货当中,请耐心等候...\")]),_c('p',[_vm._v(\"可能会搜出一些奇奇怪怪的东西，请谅解...\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"all\">\r\n    <div class=\"top-all\">\r\n      <div class=\"nav-left\">\r\n        <van-nav-bar left-text=\"返回\" left-arrow @click-left=\"onClickLeft\" />\r\n      </div>\r\n      <div class=\"search\">\r\n        <form action=\"/\">\r\n          <van-search ref=\"search\" v-model=\"value\" placeholder=\"搜点你喜欢的比如：显示器...\" @search=\"onSearch\" shape=\"round\" />\r\n        </form>\r\n      </div>\r\n    </div>\r\n    <div class=\"bg\"></div>\r\n    <!-- 搜索内容开始 -->\r\n    <div class=\"circle\"><van-circle v-if=\"open\" v-model=\"currentRate\" :rate=\"rate\" :speed=\"100\" size=\"100px\"\r\n        :color=\"gradientColor\" text=\"正在加载中...\" /></div>\r\n    <div v-if=\"!open\" class=\"result-box\">\r\n      <!-- 点击执行 toDetail 里面的代码-->\r\n      <div class=\"result-item\" v-for=\"item in resultArr\" @click=\"toDetail(item.pid)\" :key=\"item.pid\">\r\n        <img :src=\"item.smallImg\" alt />\r\n        <div class=\"result-name\">{{ item.name }}</div>\r\n        <div class=\"result-enname\">\r\n          <span>{{ item.enname }}</span>\r\n        </div>\r\n        <div class=\"result-price\">\r\n          <span>¥{{ item.price }}</span>\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n    <div v-if=\"!open\" class=\"bottom_message\">\r\n      <p>我们还在不停的进货当中,请耐心等候...</p>\r\n      <p>可能会搜出一些奇奇怪怪的东西，请谅解...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/search.less\";\r\nexport default {\r\n  computed: {\r\n    text() {\r\n      return this.currentRate.toFixed(0) + '%';\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      //获取搜索框\r\n      let searchIpt = this.$refs.search.querySelector('[type=\"search\"]');\r\n\r\n      //获取焦点\r\n      searchIpt.focus();\r\n    });\r\n  },\r\n\r\ncreated(){\r\n  this.value = localStorage.getItem('his')\r\n  if (this.value) {\r\n    this.onSearch(this.value)\r\n  }\r\n  \r\n},\r\n// beforeDestroy(){\r\n// localStorage.removeItem('his')\r\n// },\r\n  data() {\r\n    return {\r\n      open: false,\r\n      resultArr: [],\r\n      value: \"\",\r\n      currentRate: 0,\r\n      rate: null,\r\n      gradientColor: {\r\n        '0%': '#3fecff',\r\n        '100%': '#6149f6',\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n\r\n    onClickLeft() {\r\n      this.$router.go(-1);\r\n    },\r\n    onSearch(name) {\r\n      var regu = \"^[ ]+$\";\r\n      var re = new RegExp(regu);\r\n      var temp = name.indexOf(\" \");\r\n      if (re.test(name) || name.length == 0 || temp != -1) {\r\n        this.$toast(\"请输入正确的商品关键字\");\r\n        return;\r\n      }\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0\r\n      });\r\n      this.axios({\r\n        method: \"get\",\r\n        url: \"/search\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          name: name\r\n        }\r\n      })\r\n        .then(res => {\r\n          localStorage.setItem('his',this.value)\r\n\r\n          this.$toast.clear();\r\n          console.log(\"搜索到的商品\", res);\r\n          this.rate = 100\r\n          this.open = true\r\n          setTimeout(() => {\r\n\r\n            this.open = false\r\n            this.currentRate = 0\r\n            this.resultArr = res.data.result;\r\n          }, 1000);\r\n\r\n          if (res.data.result.length == 0) {\r\n            this.open = false\r\n            this.$toast(\"没有搜索到符合条件的商品\");\r\n            this.resultArr = []\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    toDetail(pid) {\r\n      console.log(pid);\r\n      //name 就是你想要跳转的页面名字 params传递参数\r\n      //params传递的参数刷新后会消失\r\n      //name 就是你想要跳转的页面名字 query传递参数\r\n      this.$router.push({ name: \"Detail\", query: { pid: pid} });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=4a455bd0&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","ref","onSearch","model","value","callback","$$v","expression","rate","gradientColor","currentRate","_e","open","_l","item","key","pid","$event","toDetail","smallImg","_v","_s","name","enname","price","staticRenderFns","computed","text","mounted","searchIpt","created","data","resultArr","methods","message","forbidClick","duration","method","url","params","appkey","then","res","localStorage","console","setTimeout","catch","err","query","$toast","loading","axios","setItem","clear","log","result","push","component"],"sourceRoot":""}