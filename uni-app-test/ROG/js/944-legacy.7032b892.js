"use strict";(self["webpackChunkmuban"]=self["webpackChunkmuban"]||[]).push([[944],{6944:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all"},[a("van-nav-bar",{attrs:{title:"个人资料","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),a("div",{staticClass:"bg"}),a("div",{staticClass:"msg-box"},[a("div",{staticClass:"msg-item"},[a("div",{staticClass:"item-text"},[t._v("头像")]),a("div",{staticClass:"avatar"},[a("van-uploader",{attrs:{"after-read":t.updateAvatar}},[a("img",{attrs:{src:t.Mymsg.userImg,alt:""}})])],1)]),a("div",{staticClass:"van-hairline--top"}),a("div",{staticClass:"msg-item"},[a("div",{staticClass:"item-text"},[t._v("用户id")]),a("div",{staticClass:"avatar"},[a("span",[t._v(t._s(t.Mymsg.userId))])])]),a("div",{staticClass:"van-hairline--top"}),a("div",{staticClass:"msg-item"},[a("div",{staticClass:"item-text"},[t._v("昵称")]),a("div",{staticClass:"avatar"},[a("span",[a("van-field",{on:{change:t.updateNickname},model:{value:t.Mymsg.nickName,callback:function(e){t.$set(t.Mymsg,"nickName",e)},expression:"Mymsg.nickName"}})],1)])]),a("div",{staticClass:"van-hairline--top"}),a("div",{staticClass:"msg-item"},[a("div",{staticClass:"item-text"},[t._v("简介")]),a("div",{staticClass:"avatar"},[a("span",[a("van-field",{attrs:{autosize:""},on:{change:t.updateDesc},model:{value:t.Mymsg.desc,callback:function(e){t.$set(t.Mymsg,"desc",e)},expression:"Mymsg.desc"}})],1)])]),a("van-uploader",{staticClass:"updateBg",attrs:{"max-count":1,deletable:!1,"after-read":t.updateBg}},[a("van-button",{attrs:{icon:"plus",type:"default"}},[t._v("修改背景")])],1)],1)],1)},i=[],l=(a(4837),a(9146)),n={created(){this.getMymsg()},data(){return{Mymsg:{}}},methods:{updateBg(t){if("image/webp"==t.file.type)return void this.$toast("此格式的图片暂时不可用");let e=t.file.type.split("/")[1],a=t.content.replace("data:image/jpeg;base64,","");this.axios({method:"post",url:"/updateUserBg",data:{appkey:this.appkey,tokenString:localStorage.getItem("_lk"),imgType:e,serverBase64Img:a}}).then((t=>{(0,l.Z)("更换背景成功"),console.log(t)}))},onClickLeft(){this.$router.go(-1)},getMymsg(){this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"get",url:"/findAccountInfo",params:{appkey:this.appkey,tokenString:localStorage.getItem("_lk")}}).then((t=>{l.Z.clear(),console.log("res",t),this.Mymsg=t.data.result[0],0==this.Mymsg.desc.length&&(this.Mymsg.desc="这家伙很懒，什么也没有留下！")}))},updateAvatar(t){if("image/webp"==t.file.type)return void this.$toast("此格式的头像不可用");let e=t.file.type.split("/")[1],a=t.content.replace("data:image/jpeg;base64,","");this.axios({method:"post",url:"/updateAvatar",data:{appkey:this.appkey,tokenString:localStorage.getItem("_lk"),imgType:e,serverBase64Img:a}}).then((t=>{(0,l.Z)("更换头像成功"),this.getMymsg(),console.log(t)}))},updateNickname(){0!=this.Mymsg.nickName.length?this.axios({method:"post",url:"/updateNickName",data:{appkey:this.appkey,tokenString:localStorage.getItem("_lk"),nickName:this.Mymsg.nickName}}).then((t=>{(0,l.Z)("修改昵称成功！"),console.log("修改后的昵称",t)})):(0,l.Z)("昵称不可以为空！")},updateDesc(){0==this.Mymsg.desc.length&&(this.Mymsg.desc="这家伙很懒，什么也没有留下！"),this.axios({method:"post",url:"/updateDesc",data:{appkey:this.appkey,tokenString:localStorage.getItem("_lk"),desc:this.Mymsg.desc}}).then((t=>{(0,l.Z)("修改简介成功！"),console.log("修改简介成功",t)}))}}},o=n,c=a(3736),r=(0,c.Z)(o,s,i,!1,null,null,null),d=r.exports}}]);
//# sourceMappingURL=944-legacy.7032b892.js.map